# 团队协作数据记录模板

## 文档说明

本模板用于记录 Agent Team 协作过程中的关键数据,为后续分析和优化提供数据支持。

**适用场景**:
- REQ-002、REQ-003 等后续需求开发
- 团队协作效率分析
- 流程改进评估

**使用方法**:
1. 在每个需求开发开始时,复制本模板创建新的数据记录文件
2. 在需求开发过程中,实时或定期更新数据
3. 需求完成后,使用记录的数据进行回顾分析

---

## 一、需求基本信息

| 字段 | 内容 |
|------|------|
| 需求编号 | REQ-XXX |
| 需求名称 | [需求名称] |
| 开始时间 | YYYY-MM-DD HH:mm |
| 结束时间 | YYYY-MM-DD HH:mm |
| 总开发时长 | XX 小时 XX 分钟 |
| Team-Lead | [team-lead 名称] |
| 参与角色数 | X 个 |

---

## 二、任务级数据记录

### 2.1 数据记录表

| 任务ID | 任务名称 | 创建时间 | 指定角色 | 实际领取者 | 领取时间 | 完成时间 | 用时(分钟) | 角色匹配 | 重复领取次数 | 跨角色原因 | 备注 |
|-------|---------|---------|---------|-----------|---------|---------|-----------|---------|------------|----------|-----|
| #1 | [任务名称] | MM-DD HH:mm | product-manager | product-manager | MM-DD HH:mm | MM-DD HH:mm | XX | ✅ | 0 | - | |
| #2 | [任务名称] | MM-DD HH:mm | architect | architect | MM-DD HH:mm | MM-DD HH:mm | XX | ✅ | 0 | - | |
| #3 | [任务名称] | MM-DD HH:mm | backend-leader | backend-leader | MM-DD HH:mm | MM-DD HH:mm | XX | ✅ | 0 | - | |
| #4 | [任务名称] | MM-DD HH:mm | frontend-leader | architect | MM-DD HH:mm | MM-DD HH:mm | XX | ❌ | 1 | 原角色忙碌 | 跨角色领取 |

**字段说明**:
- **任务ID**: Task ID (如 #1, #2)
- **任务名称**: 任务的 subject
- **创建时间**: TaskCreate 调用时间
- **指定角色**: subject 或 description 中指定的负责角色
- **实际领取者**: 最终完成任务的 agent 名称 (不含 -2 等后缀)
- **领取时间**: 任务状态变为 in_progress 的时间
- **完成时间**: 任务状态变为 completed 的时间
- **用时(分钟)**: 完成时间 - 领取时间
- **角色匹配**: ✅ 匹配 (指定角色 = 实际领取者) / ❌ 不匹配
- **重复领取次数**: 任务被不同 agents 修改 owner 的次数
- **跨角色原因**: 如果角色不匹配,记录原因 (如: 原角色忙碌、技能要求、主动请求等)
- **备注**: 其他需要记录的信息

### 2.2 任务依赖关系图

```
阶段1: 分析与设计
Task #1 (需求分析) ─┐
Task #2 (技术调研) ─┤
Task #3 (API 契约)  ─┼─> 阶段2
Task #4 (UI 设计)   ─┘

阶段2: 实施
Task #5 (后端实现) ─┐
Task #6 (前端实现) ─┼─> 阶段3
Task #7 (客户端)   ─┘

阶段3: 测试与部署
Task #8 (集成测试)
Task #9 (部署)
```

**依赖关系记录**:
- Task #5 blockedBy: [#3]
- Task #6 blockedBy: [#3, #4]
- Task #7 blockedBy: [#3, #4]
- Task #8 blockedBy: [#5, #6, #7]
- Task #9 blockedBy: [#8]

---

## 三、角色参与度统计

### 3.1 角色任务分配统计

| 角色 | 分配任务数 | 完成任务数 | 平均用时(分钟) | 角色匹配任务数 | 跨角色领取任务数 | 匹配度 |
|------|----------|----------|--------------|--------------|---------------|-------|
| product-manager | X | X | XX | X | 0 | 100% |
| architect | X | X | XX | X | 0 | 100% |
| backend-leader | X | X | XX | X | 0 | 100% |
| frontend-leader | X | X | XX | X | 1 | 75% |
| client-leader | X | X | XX | X | 0 | 100% |
| test-leader | X | X | XX | X | 0 | 100% |
| devops-leader | X | X | XX | X | 0 | 100% |

**计算公式**:
- 匹配度 = 角色匹配任务数 / 分配任务数 × 100%

### 3.2 角色协作矩阵

记录跨角色协作情况:

| 原指定角色 | 实际完成者 | 任务数 | 原因分类 |
|----------|----------|-------|---------|
| backend-leader | architect | 1 | 原角色忙碌 |
| frontend-leader | client-leader | 1 | 技能要求 |

---

## 四、协作效率数据

### 4.1 时间效率统计

| 指标 | 数值 | 目标 | 达成情况 |
|------|------|------|---------|
| 总开发时长 | XX 小时 XX 分钟 | - | - |
| 平均任务完成时间 | XX 分钟 | <30 分钟 | [✅/⚠️] |
| 最长任务用时 | XX 分钟 (Task #X) | - | - |
| 最短任务用时 | XX 分钟 (Task #X) | - | - |
| 阶段1用时 | XX 分钟 | - | - |
| 阶段2用时 | XX 分钟 | - | - |
| 阶段3用时 | XX 分钟 | - | - |

### 4.2 并行协作统计

| 指标 | 数值 |
|------|------|
| 最大并行任务数 | X 个 |
| 平均并行任务数 | X.X 个 |
| 并行时段 | XX:XX - XX:XX |
| 串行时段 | XX:XX - XX:XX |

**并行任务记录**:
- HH:mm - HH:mm: Task #1, #2, #3 (3个任务并行)
- HH:mm - HH:mm: Task #5, #6, #7 (3个任务并行)

### 4.3 任务分配效率

| 指标 | 数值 | 目标 | 达成情况 |
|------|------|------|---------|
| 任务分配准确性 | XX% | 100% | [✅/⚠️] |
| 任务重复领取次数 | X | 0 | [✅/⚠️] |
| 任务状态同步及时性 | XX% | 100% | [✅/⚠️] |
| 跨角色领取率 | XX% | <10% | [✅/⚠️] |

**计算公式**:
- 任务分配准确性 = (总任务数 - 重新分配次数) / 总任务数 × 100%
- 任务状态同步及时性 = 及时更新状态的任务数 / 总任务数 × 100%
- 跨角色领取率 = 跨角色领取任务数 / 总任务数 × 100%

---

## 五、问题与解决记录

### 5.1 问题记录表

| 问题ID | 发生时间 | 问题类型 | 问题描述 | 影响任务 | 解决方案 | 解决时间 | 处理人 | 备注 |
|-------|---------|---------|---------|---------|---------|---------|-------|-----|
| P1 | MM-DD HH:mm | 跨角色领取 | architect 领取了 backend-leader 的任务 | Task #5 | Team-lead 重新分配 | MM-DD HH:mm | team-lead | |
| P2 | MM-DD HH:mm | 任务阻塞 | API 契约未完成导致后端无法开始 | Task #5 | 添加 blockedBy 依赖 | MM-DD HH:mm | team-lead | |
| P3 | MM-DD HH:mm | 状态不同步 | 任务完成但未更新状态 | Task #3 | Team-lead 手动更新 | MM-DD HH:mm | team-lead | |

**问题类型**:
- 跨角色领取: agent 领取了不匹配其角色的任务
- 任务阻塞: 因依赖关系导致任务无法开始
- 任务冲突: 多个 agents 同时领取同一任务
- 状态不同步: 任务实际状态与记录状态不一致
- 沟通延误: agent 请求未及时得到响应
- 其他

### 5.2 问题分类统计

| 问题类型 | 发生次数 | 占比 | 平均解决时间(分钟) |
|---------|---------|------|------------------|
| 跨角色领取 | X | XX% | XX |
| 任务阻塞 | X | XX% | XX |
| 任务冲突 | X | XX% | XX |
| 状态不同步 | X | XX% | XX |
| 沟通延误 | X | XX% | XX |
| 其他 | X | XX% | XX |
| **总计** | **X** | **100%** | **XX** |

---

## 六、交付物统计

### 6.1 文档交付

| 序号 | 文档名称 | 文档路径 | 负责人 | 大小(KB) | 完成时间 |
|-----|---------|---------|-------|---------|---------|
| 1 | 需求分析文档 | docs/.../analysis.md | product-manager | XX | MM-DD HH:mm |
| 2 | 技术调研文档 | docs/.../tech_research.md | architect | XX | MM-DD HH:mm |
| 3 | API 契约文档 | docs/.../api_contract.md | architect | XX | MM-DD HH:mm |
| 4 | UI/UX 设计文档 | docs/.../ui-ux-design.md | product-manager | XX | MM-DD HH:mm |
| 5 | 测试报告 | docs/.../test_report.md | test-leader | XX | MM-DD HH:mm |

**统计**:
- 文档总数: X 份
- 文档总大小: XX KB
- 文档完整性: 100% (所有规定文档均已输出)

### 6.2 代码交付

| 分类 | 文件数 | 代码行数 | 主要文件 |
|------|-------|---------|---------|
| 后端代码 | X | XXX | api/controllers/*, application/*, domain/*, infrastructure/* |
| 前端代码 | X | XXX | components/*, pages/*, stores/*, api/* |
| 客户端代码 | X | XXX | (复用 Web 端) |
| 测试代码 | X | XXX | tests/unit/*, tests/integration/*, tests/e2e/* |
| **总计** | **X** | **XXX** | - |

### 6.3 质量指标

| 指标 | 数值 | 目标 | 达成情况 |
|------|------|------|---------|
| 代码测试覆盖率 | XX% | >80% | [✅/⚠️] |
| 测试用例数 | X 个 | - | - |
| 代码复用率 | XX% | >80% | [✅/⚠️] |
| API 端点数 | X 个 | - | - |
| 文档完整性 | XX% | 100% | [✅/⚠️] |

---

## 七、沟通协作数据

### 7.1 消息统计

| 指标 | 数值 |
|------|------|
| Team-lead 发送消息数 | X 条 |
| Agents 发送消息数 | X 条 |
| 总消息数 | X 条 |
| 平均响应时间 | XX 分钟 |

### 7.2 消息类型分布

| 消息类型 | 数量 | 占比 |
|---------|------|------|
| 任务分配通知 | X | XX% |
| 任务完成通知 | X | XX% |
| 问题询问 | X | XX% |
| 阻塞报告 | X | XX% |
| 进度更新 | X | XX% |
| 其他 | X | XX% |
| **总计** | **X** | **100%** |

### 7.3 关键沟通记录

| 时间 | 发送者 | 接收者 | 消息主题 | 类型 | 响应时间 |
|-----|-------|-------|---------|------|---------|
| MM-DD HH:mm | team-lead | backend-leader | Task #5 分配通知 | 任务分配 | - |
| MM-DD HH:mm | backend-leader | team-lead | API 契约需要澄清 | 问题询问 | XX 分钟 |
| MM-DD HH:mm | team-lead | backend-leader | API 契约补充说明 | 问题响应 | - |

---

## 八、流程改进建议记录

### 8.1 改进建议清单

| 建议ID | 提出时间 | 提出者 | 建议内容 | 影响范围 | 优先级 | 实施状态 |
|-------|---------|-------|---------|---------|-------|---------|
| S1 | MM-DD | team-lead | 在任务描述中添加更详细的技术栈说明 | 所有开发任务 | MEDIUM | 待实施 |
| S2 | MM-DD | backend-leader | 增加 API 契约评审环节 | 后端/前端协作 | HIGH | 待实施 |

### 8.2 本次需求的成功经验

1. **经验1**: [描述成功经验]
   - **场景**: [什么情况下]
   - **做法**: [采取了什么做法]
   - **效果**: [达到了什么效果]
   - **可复制性**: [是否可在后续需求中复制]

2. **经验2**: ...

### 8.3 本次需求的问题教训

1. **教训1**: [描述问题]
   - **现象**: [问题的表现]
   - **原因**: [根本原因分析]
   - **影响**: [造成的影响]
   - **改进措施**: [如何避免再次发生]

2. **教训2**: ...

---

## 九、数据记录规范

### 9.1 记录时机

- **任务创建时**: 记录任务ID、名称、创建时间、指定角色
- **任务领取时**: 记录实际领取者、领取时间
- **任务完成时**: 记录完成时间、用时、角色匹配情况
- **发现问题时**: 记录问题类型、描述、影响任务
- **解决问题时**: 记录解决方案、解决时间
- **交付物产出时**: 记录文档/代码信息

### 9.2 记录责任

| 角色 | 记录责任 |
|------|---------|
| team-lead | 所有数据的维护者,负责定期更新和汇总 |
| product-manager | 协助记录需求相关数据 |
| 其他 agents | 及时报告问题和完成情况 |

### 9.3 数据来源

- **TaskList**: 获取任务状态、owner、blockedBy 等信息
- **TaskGet**: 获取任务详细信息
- **SendMessage 记录**: 获取沟通协作数据
- **Git 提交记录**: 获取代码提交时间和文件变更
- **文档目录**: 获取交付物信息

---

## 十、数据分析指引

### 10.1 如何使用本数据进行分析

1. **角色匹配度分析**: 查看"三、角色参与度统计" → 识别哪些角色容易跨界
2. **效率瓶颈分析**: 查看"四、协作效率数据" → 识别哪些阶段用时过长
3. **问题频率分析**: 查看"五、问题与解决记录" → 识别高频问题类型
4. **沟通效率分析**: 查看"七、沟通协作数据" → 识别沟通瓶颈

### 10.2 对比分析方法

- **纵向对比**: 对比 REQ-001、REQ-002、REQ-003 的相同指标,识别改进趋势
- **横向对比**: 对比不同角色、不同阶段的指标,识别差异点

### 10.3 改进效果评估

在实施流程改进后,对比改进前后的关键指标:
- 角色匹配度: REQ-001 (100%) vs REQ-002 (XX%)
- 任务重复率: REQ-001 (0%) vs REQ-002 (XX%)
- 平均响应时间: REQ-001 (XX 分钟) vs REQ-002 (XX 分钟)

---

## 附录

### A. 模板使用示例

参考文件: `docs/team_collaboration/REQ-001_collaboration_data.md` (待创建)

### B. 相关文档

- REQ-001 回顾分析: `docs/team_collaboration/REQ-001_retrospective.md`
- Team-Lead 工作流程: `docs/team_collaboration/team_lead_workflow.md`
- 指标计算说明: `docs/team_collaboration/metrics_calculation.md`

### C. 数据导出格式

建议使用以下格式导出数据用于可视化分析:
- CSV 格式: 任务级数据、角色统计数据
- JSON 格式: 依赖关系、沟通记录
- Markdown 格式: 问题记录、改进建议

---

**模板版本**: 1.0
**创建日期**: 2026-02-15
**创建者**: product-manager
**最后更新**: 2026-02-15
**适用需求**: REQ-002, REQ-003 及后续需求
