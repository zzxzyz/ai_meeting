# Team-Lead 操作清单

## 快速参考清单

本文档提供 team-lead 日常工作的快速检查清单,确保不遗漏关键步骤。

---

## 一、新需求启动清单

### 阶段: 需求接收

- [ ] 阅读用户提供的需求描述
- [ ] 识别需求的核心目标和范围
- [ ] 确定需求编号 (REQ-XXX)
- [ ] 识别涉及的角色和领域

### 阶段: 任务规划

- [ ] 规划任务分阶段:
  - [ ] 阶段1: 分析与设计
  - [ ] 阶段2: 实施
  - [ ] 阶段3: 测试与部署
- [ ] 列出所有需要创建的任务
- [ ] 确定任务之间的依赖关系
- [ ] 估算任务优先级

### 阶段: 任务创建

- [ ] 使用标准模板创建任务
- [ ] 确认 subject 使用 `[角色名] 任务简述` 格式
- [ ] 确认 description 包含 ⚠️ 警告和完整信息
- [ ] 确认 activeForm 使用进行时态
- [ ] 记录任务编号 (Task #X)

### 阶段: 任务配置

- [ ] 为所有任务设置 owner
- [ ] 设置任务依赖关系 (blockedBy)
- [ ] 验证依赖关系无循环
- [ ] 验证阶段1任务无阻塞

### 阶段: 通知成员

- [ ] 通知阶段1任务的负责人
- [ ] 消息包含任务编号、目标、优先级、交付物
- [ ] 确认消息已发送

### 阶段: 记录数据

- [ ] 记录需求启动时间
- [ ] 记录任务创建时间
- [ ] 记录角色分配情况

---

## 二、日常监控清单

### 频率: 每 15-30 分钟

- [ ] 调用 TaskList() 查看任务状态
- [ ] 检查 in_progress 任务:
  - [ ] 是否有任务超过 60 分钟?
  - [ ] owner 是否与 subject 中的角色匹配?
- [ ] 检查 pending 任务:
  - [ ] 是否有任务未被阻塞但未分配 owner?
  - [ ] 是否有任务应该开始但未开始?
- [ ] 检查 completed 任务:
  - [ ] 是否解除了其他任务的阻塞?
  - [ ] 交付物是否已验收?
- [ ] 检查消息队列:
  - [ ] 是否有 agents 发送的消息?
  - [ ] 是否需要响应?

---

## 三、任务完成验收清单

### 触发: 收到 agent 的任务完成通知

- [ ] 验证交付物是否按路径输出:
  - [ ] 文档文件是否存在?
  - [ ] 代码文件是否存在?
  - [ ] 测试文件是否存在?
- [ ] 快速检查交付物内容:
  - [ ] 文档是否完整 (有目标、内容、结论)?
  - [ ] 代码是否符合规范?
  - [ ] 测试是否通过?
- [ ] 标记任务为 completed (如 agent 未标记):
  - [ ] 调用 TaskUpdate(X, { status: "completed" })
- [ ] 检查是否解除其他任务的阻塞:
  - [ ] 调用 TaskList() 查看 blockedBy 字段
  - [ ] 识别被解除阻塞的任务
- [ ] 通知被解除阻塞的 agents:
  - [ ] 发送 SendMessage 通知
  - [ ] 包含依赖任务的交付物路径
- [ ] 记录任务完成时间和数据

---

## 四、Agent 空闲处理清单

### 触发: 收到 idle_notification

- [ ] 识别 agent 的角色
- [ ] 调用 TaskList() 查看该 agent 的待办任务
- [ ] 判断情况:
  - [ ] 有待办任务且未被阻塞 → 通知继续执行
  - [ ] 有待办任务但被阻塞 → 通知待命
  - [ ] 无待办任务 → 通知待命或推荐新任务
- [ ] 发送 SendMessage 响应
- [ ] 记录 agent 空闲时间

---

## 五、问题处理清单

### 问题类型: 跨角色领取

- [ ] 识别问题:
  - [ ] owner 与 subject 中的角色不匹配
- [ ] 发送消息给错误的 agent:
  - [ ] 说明原因
  - [ ] 要求停止工作
- [ ] 重新分配任务:
  - [ ] TaskUpdate(X, { owner: "正确角色", status: "pending" })
- [ ] 通知正确的 agent:
  - [ ] 发送任务分配消息
- [ ] 记录问题和解决方案

### 问题类型: 任务延误

- [ ] 识别问题:
  - [ ] in_progress 超过 60 分钟
- [ ] 发送消息询问进度:
  - [ ] 是否遇到阻塞?
  - [ ] 是否需要帮助?
- [ ] 根据回复采取措施:
  - [ ] 协助解决阻塞
  - [ ] 调整任务范围
  - [ ] 重新分配任务
- [ ] 记录问题和解决方案

### 问题类型: 任务冲突

- [ ] 识别问题:
  - [ ] 多个 agents 同时领取同一任务
- [ ] 确定优先级:
  - [ ] 先领取者优先
  - [ ] 或更匹配角色者优先
- [ ] 通知其他 agents 停止:
  - [ ] 发送消息说明情况
- [ ] 重置任务状态:
  - [ ] TaskUpdate(X, { owner: "最终负责人" })
- [ ] 为停止的 agents 分配新任务
- [ ] 记录问题和解决方案

### 问题类型: 任务澄清请求

- [ ] 理解 agent 的疑问
- [ ] 澄清任务细节
- [ ] 更新任务描述 (如有必要):
  - [ ] TaskUpdate(X, { description: "更新后的描述" })
- [ ] 回复 agent:
  - [ ] 发送详细说明
  - [ ] 提供参考资料
- [ ] 记录问题和解决方案

---

## 六、批量操作清单

### 操作: 批量创建任务

```javascript
// 准备任务列表
const tasks = [...]

// 批量创建
tasks.forEach(task => {
  TaskCreate(task)
})
```

- [ ] 准备任务数据 (subject, description, activeForm)
- [ ] 执行批量创建
- [ ] 记录任务编号 (Task #1, #2, #3...)

### 操作: 批量分配 owner

```javascript
// 准备分配列表
const assignments = [
  { taskId: 1, owner: "product-manager" },
  { taskId: 2, owner: "architect" },
  // ...
]

// 批量分配
assignments.forEach(({ taskId, owner }) => {
  TaskUpdate(taskId, { owner })
})
```

- [ ] 准备分配数据 (taskId, owner)
- [ ] 执行批量分配
- [ ] 验证分配结果

### 操作: 批量设置依赖

```javascript
// 阶段2依赖阶段1
[5, 6, 7].forEach(taskId => {
  TaskUpdate(taskId, { addBlockedBy: ["3"] })
})
```

- [ ] 准备依赖关系数据
- [ ] 执行批量设置
- [ ] 验证依赖关系

### 操作: 批量通知成员

```javascript
// 准备通知列表
const notifications = [
  { recipient: "product-manager", taskId: 1, ... },
  { recipient: "architect", taskId: 2, ... },
  // ...
]

// 批量通知
notifications.forEach(({ recipient, taskId, ... }) => {
  SendMessage({
    type: "message",
    recipient,
    content: `已为你分配 Task #${taskId}...`,
    summary: `新任务分配: Task #${taskId}`
  })
})
```

- [ ] 准备通知数据 (recipient, content, summary)
- [ ] 执行批量通知
- [ ] 确认消息已发送

---

## 七、周期性检查清单

### 频率: 每小时

- [ ] 统计任务完成情况:
  - [ ] 已完成任务数
  - [ ] 进行中任务数
  - [ ] 待办任务数
- [ ] 评估整体进度:
  - [ ] 是否按计划推进?
  - [ ] 是否有延误风险?
- [ ] 识别瓶颈:
  - [ ] 是否有任务长时间未完成?
  - [ ] 是否有角色负载不均衡?
- [ ] 调整计划 (如有必要):
  - [ ] 重新分配任务
  - [ ] 调整优先级
  - [ ] 增加资源

### 频率: 每日

- [ ] 记录协作数据:
  - [ ] 任务创建数、完成数
  - [ ] 角色匹配度
  - [ ] 任务重复率
  - [ ] 平均完成时间
- [ ] 总结当日进展:
  - [ ] 完成了哪些任务?
  - [ ] 遇到了哪些问题?
  - [ ] 有哪些经验教训?
- [ ] 规划次日工作:
  - [ ] 优先级任务
  - [ ] 需要关注的问题

---

## 八、需求交付清单

### 阶段: 交付前检查

- [ ] 所有任务已完成:
  - [ ] TaskList() 显示所有任务 completed
- [ ] 所有交付物已输出:
  - [ ] 文档 (需求分析、技术调研、API 契约、UI 设计、测试报告)
  - [ ] 代码 (后端、前端、客户端)
  - [ ] 测试 (单元测试、集成测试、E2E 测试)
- [ ] 质量检查:
  - [ ] 测试覆盖率 >80%
  - [ ] 代码规范检查通过
  - [ ] 文档完整性检查
- [ ] 集成测试通过:
  - [ ] 后端 API 测试通过
  - [ ] 前端 E2E 测试通过
  - [ ] 端到端流程测试通过

### 阶段: 交付物整理

- [ ] 创建交付清单文档:
  - [ ] 列出所有交付物及路径
  - [ ] 列出关键指标 (测试覆盖率、代码行数等)
- [ ] 整理协作数据:
  - [ ] 任务完成情况
  - [ ] 角色匹配度
  - [ ] 协作效率指标
- [ ] 编写交付报告:
  - [ ] 需求完成情况
  - [ ] 质量指标
  - [ ] 经验教训

### 阶段: 通知用户

- [ ] 发送交付通知:
  - [ ] 需求编号
  - [ ] 完成时间
  - [ ] 交付物清单
  - [ ] 质量指标
- [ ] 提供访问路径:
  - [ ] 文档路径
  - [ ] 代码仓库
  - [ ] 测试报告

---

## 九、数据记录清单

### 任务级数据

- [ ] 任务编号
- [ ] 任务名称 (subject)
- [ ] 指定角色 (subject 中的角色名)
- [ ] 实际领取者 (owner)
- [ ] 创建时间
- [ ] 领取时间 (status 变为 in_progress)
- [ ] 完成时间 (status 变为 completed)
- [ ] 角色匹配 (是/否)
- [ ] 重复领取次数

### 需求级数据

- [ ] 需求编号 (REQ-XXX)
- [ ] 需求名称
- [ ] 开始时间
- [ ] 完成时间
- [ ] 总任务数
- [ ] 完成任务数
- [ ] 角色匹配度 (%)
- [ ] 任务重复率 (%)
- [ ] 平均完成时间 (分钟)
- [ ] 并行度 (同时进行的任务数)
- [ ] 遇到的问题和解决方案

---

## 十、紧急情况处理清单

### 情况: 关键 Agent 无响应

- [ ] 识别问题:
  - [ ] Agent 长时间未响应消息
  - [ ] 任务长时间未更新
- [ ] 尝试联系:
  - [ ] 发送消息询问状态
  - [ ] 等待 15 分钟
- [ ] 备用方案:
  - [ ] 重新分配任务给其他 agent
  - [ ] 或自己接管任务
- [ ] 通知团队:
  - [ ] 说明情况
  - [ ] 调整计划
- [ ] 记录问题

### 情况: 任务阻塞无法解除

- [ ] 识别问题:
  - [ ] 依赖的任务长时间未完成
  - [ ] 或依赖的外部条件无法满足
- [ ] 分析影响:
  - [ ] 有多少任务被阻塞?
  - [ ] 是否影响交付时间?
- [ ] 采取措施:
  - [ ] 协助完成依赖任务
  - [ ] 或寻找替代方案
  - [ ] 或调整任务顺序
- [ ] 更新计划:
  - [ ] 调整任务依赖
  - [ ] 重新安排时间
- [ ] 通知团队:
  - [ ] 说明情况
  - [ ] 新的计划

### 情况: 质量问题

- [ ] 识别问题:
  - [ ] 交付物不符合要求
  - [ ] 测试未通过
- [ ] 评估严重程度:
  - [ ] 是否影响功能?
  - [ ] 是否影响交付?
- [ ] 采取措施:
  - [ ] 要求 agent 修复
  - [ ] 或重新分配任务
- [ ] 创建修复任务:
  - [ ] TaskCreate({ subject: "修复 XXX 问题", ... })
- [ ] 记录问题和解决方案

---

## 十一、最佳实践检查清单

### 原则: 主动管理

- [ ] ✅ 主动分配任务,不等待 agents 自主领取
- [ ] ✅ 及时通知任务状态变化
- [ ] ✅ 定期检查任务进度
- [ ] ❌ 不要被动等待 agents 报告问题

### 原则: 清晰沟通

- [ ] ✅ 使用标准模板创建任务
- [ ] ✅ 消息格式清晰,包含必要信息
- [ ] ✅ 及时响应 agents 的请求
- [ ] ❌ 不要使用模糊或简略的描述

### 原则: 灵活应对

- [ ] ✅ 根据实际情况调整任务和计划
- [ ] ✅ 允许合理的跨角色领取 (需批准)
- [ ] ✅ 接受 agents 的建议和反馈
- [ ] ❌ 不要僵化执行计划

### 原则: 数据驱动

- [ ] ✅ 系统化记录协作数据
- [ ] ✅ 定期分析数据,识别问题
- [ ] ✅ 基于数据持续改进流程
- [ ] ❌ 不要凭感觉判断

---

## 十二、快速参考命令

### 查看任务列表

```javascript
TaskList()
```

### 创建任务

```javascript
TaskCreate({
  subject: "[角色名] 任务简述",
  description: "...",
  activeForm: "进行时态"
})
```

### 分配任务

```javascript
TaskUpdate(X, { owner: "角色名" })
```

### 设置依赖

```javascript
TaskUpdate(X, { addBlockedBy: ["Y", "Z"] })
```

### 标记完成

```javascript
TaskUpdate(X, { status: "completed" })
```

### 发送消息

```javascript
SendMessage({
  type: "message",
  recipient: "角色名",
  content: "消息内容",
  summary: "消息摘要"
})
```

---

**文档版本**: 1.0
**创建日期**: 2026-02-15
**创建者**: team-lead
**最后更新**: 2026-02-15
